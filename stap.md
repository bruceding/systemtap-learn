## stap

stap 是 SystemTap 的命令行工具，它会把脚本语言编译成内核模块然后运行。脚本可以通过命令行运行，也可以保存到文件运行。

* `stap -e` 可以运行命令行脚本
* `stap test.stp` 可以运行脚本文件

脚本会一直运行直到下面情况发生:

* 用户手动结束，输入 `Ctrl+C`
* 脚本执行到 exit 函数
* 脚本产生足够多的软件错误
* 使用 `-c` 指定的命令结束运行，脚本也结束 

stap 主要功能如下：

* 翻译脚本语言
* 生成编译成内核模块
* 加载模块，运行，把输出打印到控制台
* 运行结束时，卸载模块

介绍几个 stap 常用的命令参数:

* `-v` 输出更详细的信息
* `-l` 输出匹配的探针, 比如输出系统调用可用的探针

```
stap -l 'syscall.*'
```

* `-L` 输出匹配的探针和本地变量, 比如输出系统调用可用的探针及可以使用的变量

```
stap -L 'syscall.*'
```

#### 资源限制

